# 開発ログ（2025年2月21日）

ここ4〜5時間で実施した開発内容の整理です。

---

## 1. ルートLPをデザイン2（レトロ×モダン）に変更

### 背景
- デザイン2（レトロ×モダン）をメインにしたい方針
- 案A: ルート `/` をデザイン2にする

### 実施内容

| 変更 | 内容 |
|------|------|
| `src/app/page.tsx` | デザイン2のLP内容に差し替え |
| `src/app/v1/page.tsx` | 新規作成。旧デザイン1のLPを退避 |
| `src/app/v2/page.tsx` | `/` へのリダイレクトに変更 |
| `src/middleware.ts` | ログイン済みで `/` アクセス時 → `/v2/dashboard` へ |
| フッター | ルート「デザイン1を見る」→ `/v1`、v1「デザイン2を見る」→ `/` |

### 結果
- `/` = デザイン2（レトロ×モダン）のLP
- `/v1` = 旧デザイン1のLP（参照用）
- `/v2` = `/` へリダイレクト

---

## 2. 古いデザイン（ショートカット等）が表示される問題の修正

### 背景
- デザイン2をメインにしたのに、ショートカットなど古いデザイン1が表示される
- `/dashboard`（デザイン1）へのリンクが残っていた

### 実施内容

| 変更 | 内容 |
|------|------|
| `src/middleware.ts` | ログイン済みで `/dashboard` アクセス時 → `/v2/dashboard` へリダイレクト |
| `src/components/MobileBottomNav.tsx` | ホームリンクを `/v2/dashboard` に変更、`/v2/dashboard` でもナビ表示 |
| `src/app/onboarding/page.tsx` | デフォルトのリダイレクト先を `/v2/dashboard` に変更 |

### 結果
- どの経路からでも常にデザイン2のダッシュボードが表示される
- モバイル下部ナビの「ホーム」も `/v2/dashboard` に統一

---

## 3. デプロイ関連

### 実施内容
- 上記変更を GitHub にコミット・プッシュ
- Vercel の自動デプロイで本番反映

### コミット
1. `85a509e` - ルートをデザイン2（レトロ×モダン）に変更
2. `78ca93c` - 古いデザイン1を表示しない: /dashboard→/v2/dashboardへリダイレクト、ナビをv2に統一

---

## 4. その他（会話で確認した内容）

- **Vercel と GitHub**: 1プロジェクトで接続。push で自動デプロイ
- **DM マイグレーション**: `20260220140000_create_direct_messages.sql` は以前作成済み。今回の作業範囲外
- **本番URL**: https://jimoto-connect.vercel.app/

---

## 5. 現在のURL構成（整理後）

| URL | 役割 |
|-----|------|
| `/` | LP（デザイン2・レトロ×モダン）※メイン |
| `/v1` | LP（デザイン1・旧デザイン） |
| `/v2` | `/` へリダイレクト |
| `/v2/dashboard` | ダッシュボード（デザイン2）※メイン |
| `/dashboard` | `/v2/dashboard` へリダイレクト |
