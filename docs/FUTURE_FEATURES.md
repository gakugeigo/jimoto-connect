# 今後の開発で実装する機能

以下の要件を今後の開発で適宜入れ込んでいきます。

---

## 1. 部活の表示範囲

**要件**: 部活の掲示板は**同級生でなくても、他の学年の人（OB・OG）も見れる**ようにする。

**現状**: 投稿は学校（school_id）単位で表示。学年でのフィルタはしていない。

**今後の対応**: 
- 部活関連の表示・フィルタを実装する際、**学年で絞らない**設計を維持する
- 「同級生」フィルタを追加する場合でも、部活の投稿は学年をまたいで全員が見れるようにする

---

## 2. 「今地元に帰省中」チェックインボタン ✅ 実装済

**要件**: ユーザーが「今地元に帰省中」であることを知らせるボタン。

**実装内容**:
- ダッシュボード・プロフィールにトグルボタン配置
- 同窓生検索結果・他ユーザープロフィールで「帰省中」バッジ表示
- 検索で「帰省中のみ表示」フィルタ追加

---

## 3. 同級生の居住地一覧 ✅ 実装済

**要件**: 同級生が今何県に住んでいるか、**一覧で見れる**ようにする。

**実装内容**:
- `/residents` で都道府県ごとの人数・一覧を表示
- 学校・卒業年でフィルタ可能
- タップで都道府県を展開し、同級生一覧を表示
- `/map` と相互リンク（マップ表示 ⇔ 一覧表示）

---

## 4. 業界・職種の表示 ✅ 実装済

**要件**: 同級生が働いている**業界・職種**が分かるようにする。会社名は表示しない。

**実装内容**:
- プロフィール編集で業界・職種を選択入力
- 他ユーザープロフィール・同窓生検索結果で表示（会社名は非表示）

---

## 5. 同じ学校 × 同じ職種で検索（今後検討）

**要件**: 同じ学校の同じ職種の人が見つけられる機能。

**現状**: 検索で学校・卒業年・部活・居住地・帰省中でフィルタ可能。職種（occupation）での絞り込みは未実装。

**今後の実装**:
- 検索画面に「職種で絞り込み」を追加
- `profiles.occupation` と `profile_schools` を組み合わせて、母校かつ職種が同じ人を検索

---

## マイグレーションの実行

上記のDB変更を反映するには、以下を実行してください：

1. `supabase/migrations/20260219130000_add_profile_extended.sql` を開く
2. 内容をすべてコピー
3. Supabase ダッシュボード → SQL Editor → New query に貼り付けて Run

（手順の詳細は docs/GROUPS_MIGRATION.md を参照）
